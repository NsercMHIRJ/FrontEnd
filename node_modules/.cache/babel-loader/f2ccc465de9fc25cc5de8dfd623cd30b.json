{"ast":null,"code":"var _jsxFileName = \"/Users/navneetbhatti/Desktop/FrontEnd/src/Components/MdcMessages/Reports/Report.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport DailyReport from './DailyReport/DailyReport';\nimport FlagReport from './FlagReport/FlagReport';\nimport HistoryReport from './HistoryReport/HistoryReport';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: '50px auto',\n    width: '95vw'\n  },\n  flagFilters: {\n    margin: '20px',\n    maxWidth: '100%',\n    display: 'flex'\n  },\n  flagH3: {\n    marginLeft: '24px'\n  },\n  button: {\n    margin: '9px 30px',\n    backgroundColor: \"#C5D3E0\",\n    width: '600px',\n    height: '51px'\n  },\n  buttonFlag: {\n    margin: '0px 50px 15px 0px',\n    backgroundColor: \"#C5D3E0\",\n    width: '89%'\n  }\n}));\n\nconst Report = props => {\n  _s();\n\n  const classes = useStyles();\n  const [report, setReport] = useState(props.reportConditions);\n  const [dailyReportData, setDailyReportData] = useState([]);\n  const [historyReportData, setHistoryReportData] = useState([]);\n  const [flagData, setFlagData] = useState([]);\n  const [flagList, setFlagList] = useState('');\n  const [flagConditions, setFlagConditions] = useState({});\n  const [loadingDaily, setLoadingDaily] = useState();\n  const [loadingHistory, setLoadingHistory] = useState();\n  const [loadingFlag, setLoadingFlag] = useState();\n  const [dailyValue, setDailyValue] = useState(0);\n  const [histValue, setHistValue] = useState(0);\n  const [flagValue, setFlagValue] = useState(0);\n\n  const HandleMultipleRowSelectReport = flagList => {\n    setFlagList(flagList);\n  };\n\n  useEffect(() => {\n    if (!Object.values(props.reportConditions).includes(\"\")) {\n      setReport(props.reportConditions);\n    }\n  }, [props.reportConditions]);\n  useEffect(() => {\n    if (!Object.values(report).includes(\"\")) {\n      let consecutiveDays = report.analysis === \"daily\" ? 0 : report.days;\n      const path = 'http://20.85.211.143:8080/api/GenerateReport/' + report.analysis + '/' + report.occurences + '/' + report.legs + '/' + report.intermittent + '/' + consecutiveDays + '/' + report.ata + '/' + report.eqID + '/' + report.operator + '/' + report.messages + '/' + report.fromDate + '/' + report.toDate;\n      console.log(path, \"path no empty value\");\n\n      if (report.analysis === \"daily\") {\n        setDailyValue(1);\n        setDailyReportData([]);\n        setLoadingDaily(true);\n        axios.post(path).then(function (res) {\n          var data = JSON.parse(res.data);\n          setDailyReportData(data);\n          setLoadingDaily(false);\n        }).catch(function (err) {\n          console.log(err);\n          setLoadingDaily(false);\n        });\n      } else {\n        setHistValue(1);\n        setHistoryReportData([]);\n        setLoadingHistory(true);\n        axios.post(path).then(function (res) {\n          var data = JSON.parse(res.data);\n          setHistoryReportData(data);\n          setLoadingHistory(false);\n        }).catch(function (err) {\n          console.log(err);\n          setLoadingHistory(false);\n        });\n      }\n    }\n  }, [report]);\n\n  const handleGenerateFlagReport = event => {\n    setFlagConditions({ ...props.reportConditions,\n      flagList\n    });\n    setFlagData([]);\n    setLoadingFlag(true);\n    setFlagValue(1);\n  };\n\n  useEffect(() => {\n    if (!(Object.keys(flagConditions).length === 0 || Object.values(flagConditions).includes(\"\"))) {\n      const flagPath = 'http://20.85.211.143:8080/api/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' + flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.ata + '/' + flagConditions.eqID + '/' + flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' + flagConditions.toDate + '/' + flagConditions.flagList;\n      console.log(flagPath);\n      axios.post(flagPath).then(function (res) {\n        var data = JSON.parse(res.data);\n        setFlagData(data);\n        setLoadingFlag(false);\n      }).catch(function (err) {\n        console.log(err);\n        setLoadingFlag(false);\n      });\n    }\n  }, [flagConditions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 0,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 10\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => handleGenerateFlagReport(),\n              className: classes.buttonFlag,\n              children: \"Generate Flag Report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(HistoryReport, {\n              data: historyReportData,\n              title: \"History Report\",\n              reportConditions: report,\n              HandleMultipleRowSelectReport: HandleMultipleRowSelectReport,\n              loading: loadingHistory\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(DailyReport, {\n        data: dailyReportData,\n        title: \"Daily Report\",\n        reportConditions: report,\n        loading: loadingDaily\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), flagData !== \"\" && flagData !== \"undefined\" && flagValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FlagReport, {\n        data: flagData,\n        flagReportConditions: flagConditions,\n        title: \"Flag Report\",\n        loading: loadingFlag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Report, \"ExHbnE0NX78qEI1GwMpcRd+96pE=\", false, function () {\n  return [useStyles];\n});\n\n_c = Report;\nexport default Report;\n\nvar _c;\n\n$RefreshReg$(_c, \"Report\");","map":{"version":3,"sources":["/Users/navneetbhatti/Desktop/FrontEnd/src/Components/MdcMessages/Reports/Report.js"],"names":["React","useState","useEffect","DailyReport","FlagReport","HistoryReport","Grid","makeStyles","Button","axios","useStyles","theme","root","margin","width","flagFilters","maxWidth","display","flagH3","marginLeft","button","backgroundColor","height","buttonFlag","Report","props","classes","report","setReport","reportConditions","dailyReportData","setDailyReportData","historyReportData","setHistoryReportData","flagData","setFlagData","flagList","setFlagList","flagConditions","setFlagConditions","loadingDaily","setLoadingDaily","loadingHistory","setLoadingHistory","loadingFlag","setLoadingFlag","dailyValue","setDailyValue","histValue","setHistValue","flagValue","setFlagValue","HandleMultipleRowSelectReport","Object","values","includes","consecutiveDays","analysis","days","path","occurences","legs","intermittent","ata","eqID","operator","messages","fromDate","toDate","console","log","post","then","res","data","JSON","parse","catch","err","handleGenerateFlagReport","event","keys","length","flagPath"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react';\nimport DailyReport from './DailyReport/DailyReport';\nimport FlagReport from './FlagReport/FlagReport';\nimport HistoryReport from './HistoryReport/HistoryReport';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin:'50px auto',\n    width:'95vw',\n  },\n  flagFilters: {\n    margin: '20px',\n    maxWidth: '100%',\n    display: 'flex',\n  },  \n  flagH3: {\n    marginLeft: '24px',\n  },\n  button:{\n    margin:'9px 30px',\n    backgroundColor:\"#C5D3E0\",\n    width: '600px',\n    height: '51px',\n  },\n  buttonFlag:{\n    margin:'0px 50px 15px 0px',\n    backgroundColor:\"#C5D3E0\",\n    width: '89%',\n  },\n}));\n\nconst Report = (props) => {\n  const classes = useStyles();\n  const [report, setReport] = useState(props.reportConditions);\n  const [dailyReportData, setDailyReportData] = useState([]);\n  const [historyReportData, setHistoryReportData] = useState([]);\n  const [flagData, setFlagData] = useState([]);\n  const [flagList,setFlagList] = useState('');\n  const [flagConditions,setFlagConditions] = useState({});\n  const [loadingDaily, setLoadingDaily] = useState();\n  const [loadingHistory, setLoadingHistory] = useState();\n  const [loadingFlag, setLoadingFlag] = useState();\n  const [dailyValue,setDailyValue] = useState(0);\n  const [histValue,setHistValue] = useState(0);\n  const [flagValue,setFlagValue] = useState(0);\n\n  const HandleMultipleRowSelectReport = (flagList) => {\n    setFlagList(flagList);\n  }\n\n  useEffect(() => {\n    if (!Object.values(props.reportConditions).includes(\"\")){\n      setReport(props.reportConditions);\n    }\n  }, [props.reportConditions]);\n\n  useEffect(() => {\n    if(!Object.values(report).includes(\"\")){\n      let consecutiveDays = report.analysis === \"daily\" ? 0 : report.days; \n      const path = 'http://20.85.211.143:8080/api/GenerateReport/' + report.analysis + '/' + report.occurences + '/' + report.legs + '/' + report.intermittent + '/' +\n      consecutiveDays + '/' + report.ata + '/' + report.eqID + '/'+ report.operator + '/' + report.messages + '/' + report.fromDate + '/' + report.toDate;\n      console.log(path,\"path no empty value\");\n\n      if (report.analysis === \"daily\"){\n        setDailyValue(1);\n        setDailyReportData([]);\n        setLoadingDaily(true);\n\n        axios.post(path).then(function (res){\n          var data = JSON.parse(res.data);\n          setDailyReportData(data);    \n          setLoadingDaily(false);\n        }).catch(function (err){\n          console.log(err);\n          setLoadingDaily(false);\n        });\n      }\n      else{\n        setHistValue(1);\n        setHistoryReportData([]);\n        setLoadingHistory(true);\n\n        axios.post(path).then(function (res){\n          var data = JSON.parse(res.data);\n          setHistoryReportData(data);  \n          setLoadingHistory(false);  \n        }).catch(function (err){\n          console.log(err);    \n          setLoadingHistory(false);\n        });\n      }\n    }    \n  }, [report]);\n\n  const handleGenerateFlagReport = (event) => {\n    setFlagConditions({\n      ...props.reportConditions,\n      flagList\n    });\n    setFlagData([]);\n    setLoadingFlag(true);\n    setFlagValue(1);\n  }\n\n  useEffect(() => {\n    if (!(Object.keys(flagConditions).length === 0 || Object.values(flagConditions).includes(\"\"))){\n      const flagPath = 'http://20.85.211.143:8080/api/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' + \n      flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.ata + '/' + \n      flagConditions.eqID + '/'+ flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' + \n      flagConditions.toDate + '/' + flagConditions.flagList;\n      console.log(flagPath);\n\n      axios.post(flagPath).then(function (res){\n        var data = JSON.parse(res.data);\n        setFlagData(data);\n        setLoadingFlag(false);\n      }).catch(function (err){\n        console.log(err);\n        setLoadingFlag(false);\n      });\n    }\n  },[flagConditions]);\n\n  return(\n    <div className={classes.root}>\n      {historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 &&\n        <>\n          <div>\n            <Grid container spacing={0}>\n              <Grid item xs={10}></Grid>\n              <Grid item xs={2}>\n                <Button \n                  variant=\"contained\" \n                  onClick = {()=>handleGenerateFlagReport()}\n                  className={classes.buttonFlag}>\n                    Generate Flag Report\n                </Button>\n              </Grid>\n              <Grid item xs={12}>\n                <HistoryReport data = {historyReportData}  title = \"History Report\" reportConditions = {report} HandleMultipleRowSelectReport = {HandleMultipleRowSelectReport} loading = {loadingHistory}/>\n              </Grid>\n            </Grid>\n          </div>\n        </>\n      }\n      {dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 &&\n        <>\n          <DailyReport data = {dailyReportData} title = \"Daily Report\" reportConditions = {report} loading = {loadingDaily}/>\n        </>\n      }\n      {flagData !== \"\" && flagData !== \"undefined\" && flagValue === 1 &&\n        <>\n          <FlagReport data = {flagData} flagReportConditions = {flagConditions} title = \"Flag Report\" loading = {loadingFlag}/>\n        </>\n      }\n    </div>  \n  );    \n};\n\nexport default Report;"]},"metadata":{},"sourceType":"module"}